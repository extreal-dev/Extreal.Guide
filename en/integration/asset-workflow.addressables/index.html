<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.2.0 docs-doc-page docs-doc-id-integration/asset-workflow.addressables" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Asset Workflow using Addressables | Extreal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://extreal-dev.github.io/Extreal.Guide/en/integration/asset-workflow.addressables"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.2.0"><meta data-rh="true" name="docsearch:version" content="1.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.2.0"><meta data-rh="true" property="og:title" content="Asset Workflow using Addressables | Extreal"><meta data-rh="true" name="description" content="What for?"><meta data-rh="true" property="og:description" content="What for?"><link data-rh="true" rel="icon" href="/Extreal.Guide/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://extreal-dev.github.io/Extreal.Guide/en/integration/asset-workflow.addressables"><link data-rh="true" rel="alternate" href="https://extreal-dev.github.io/Extreal.Guide/integration/asset-workflow.addressables" hreflang="ja"><link data-rh="true" rel="alternate" href="https://extreal-dev.github.io/Extreal.Guide/en/integration/asset-workflow.addressables" hreflang="en"><link data-rh="true" rel="alternate" href="https://extreal-dev.github.io/Extreal.Guide/integration/asset-workflow.addressables" hreflang="x-default"><script src="https://plausible.io/js/script.js" defer="defer" data-domain="extreal-dev.github.io,all.fintan"></script>
<script src="/Extreal.Guide/js/custom.js"></script>
<script src="/Extreal.Guide/en/js/custom.js"></script><link rel="stylesheet" href="/Extreal.Guide/en/assets/css/styles.bb6e314e.css">
<script src="/Extreal.Guide/en/assets/js/runtime~main.94772675.js" defer="defer"></script>
<script src="/Extreal.Guide/en/assets/js/main.204b57dc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://fintan.jp" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/Extreal.Guide/en/img/fintan-logo.jpg" alt="Fintan" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Extreal.Guide/en/img/fintan-logo.jpg" alt="Fintan" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Extreal.Guide/en/">Extreal</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Extreal.Guide/en/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/Extreal.Guide/en/intro">1.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Extreal.Guide/en/next/integration/asset-workflow.addressables">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Extreal.Guide/en/integration/asset-workflow.addressables">1.2.0</a></li><li><a class="dropdown__link" href="/Extreal.Guide/en/1.1.0/integration/asset-workflow.addressables">1.1.0</a></li><li><a class="dropdown__link" href="/Extreal.Guide/en/1.0.0/intro">1.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/Extreal.Guide/integration/asset-workflow.addressables" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/Extreal.Guide/en/integration/asset-workflow.addressables" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://fintan.jp/blog-category/xr/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Fintan - XR<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/extreal-dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Extreal.Guide/en/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/category/release">Release</a><button aria-label="Expand sidebar category &#x27;Release&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/category/core">Core</a><button aria-label="Expand sidebar category &#x27;Core&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/Extreal.Guide/en/category/integration">Integration</a><button aria-label="Collapse sidebar category &#x27;Integration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/integration/chat.vivox">Chat using Vivox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/integration/multiplay.ngo">Multiplay using Netcode for GameObjects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Extreal.Guide/en/integration/asset-workflow.addressables">Asset Workflow using Addressables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/integration/web.common">Common for Web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/integration/p2p.webrtc">P2P using WebRTC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/integration/chat.webrtc">Chat using WebRTC</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/category/sample-application">Sample Application</a><button aria-label="Expand sidebar category &#x27;Sample Application&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/category/learning">Learning</a><button aria-label="Expand sidebar category &#x27;Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/category/legal">Legal</a><button aria-label="Expand sidebar category &#x27;Legal&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Extreal.Guide/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Extreal.Guide/en/category/integration"><span itemprop="name">Integration</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Asset Workflow using Addressables</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.2.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="asset-workflow-using-addressables">Asset Workflow using Addressables</h1>
<h2 id="what-for">What for?</h2>
<p>We provide a wrapper that makes <a href="https://docs.unity3d.com/Packages/com.unity.addressables@1.21/manual/index.html">Addressables</a> easier to use in applications.</p>
<p>We will call this feature, which wraps Addressables, the Addressables wrapper.</p>
<p>The Addressables wrapper provides features to facilitate the creation of download status displays and asset encryption/decryption, which are necessary for applications using Addressables.</p>
<p>The goal is to make Addressables introduction smooth by using the Addressables wrapper in your applications.</p>
<admonition type="caution"><p>The  wrapper makes Addressables easier to use, but it does not mean that you only need to know the Addressables wrapper to realize asset workflow without knowing Addressables.
The Addressables wrapper compensates for the difficulties and lack of features when using Addressables as it is, but transfers the asset workflow processing to Addressables.
Therefore, to use the Addressables wrapper, it is assumed that you know Addressables.
If you do not know Addressables, please refer to <a href="/Extreal.Guide/en/learning/intro#asset-workflow">Learning</a> to learn about Addressables.
This guide assumes you know Addressables.</p></admonition>
<h2 id="specification">Specification</h2>
<p>The specifications of the Addressables wrapper are as follows.</p>
<ul>
<li>You can use Addressables features.</li>
<li>Reconnect when asset downloads fail to connect.</li>
<li>You can add processing triggered by asset download state.</li>
<li>You can encrypt and decrypt assets.</li>
</ul>
<h2 id="architecture">Architecture</h2>
<h3 id="addressables-wrapper">Addressables wrapper</h3>
<mermaid chart="classDiagram

    AssetProvider ..&gt; AssetDisposable
    AssetProvider ..&gt; Addressables
    AssetDisposable ..&gt; Addressables
    DisposableBase &lt;|-- AssetProvider
    DisposableBase &lt;|-- AssetDisposable

    class AssetProvider {
        +OnDownloading IObservable
        +OnDownloaded IObservable
        +OnConnectRetrying IObservable
        +OnConnectRetried IObservable
        +AssetProvider(retryStrategy)
        +DownloadAsync(assetName, downloadStatusInterval, nextFunc) void
        +GetDownloadSizeAsync(assetName) long
        +LoadAssetAsync(assetName) AssetDisposable
        +LoadAssetAsync() AssetDisposable
        +LoadSceneAsync(assetName, loadMode) AssetDisposable
    }

    class AssetDisposable {
        +Result TResult
    }

    class DisposableBase {
        &lt;&lt;extreal&gt;&gt;
    }
    
    class Addressables {
        &lt;&lt;Addressables&gt;&gt;
    }"></mermaid>
<h3 id="addressables-customization">Addressables customization</h3>
<mermaid chart="classDiagram

    BuildScriptBase &lt;|-- BuildScriptEncryptMode
    ResourceProviderBase &lt;|-- CryptoAssetBundleProviderBase
    IAssetBundleResource &lt;|.. CryptoAssetBundleResource
    DownloadHandlerScript &lt;|-- DownloadHandlerFileWithDecryption
    BuildScriptEncryptMode ..&gt; ICryptoStreamFactory
    CryptoAssetBundleProviderBase ..&gt; ICryptoStreamFactory
    CryptoAssetBundleResource ..&gt; ICryptoStreamFactory
    DownloadHandlerFileWithDecryption ..&gt; ICryptoStreamFactory
    CryptoAssetBundleProviderBase ..&gt; CryptoAssetBundleResource
    CryptoAssetBundleResource ..&gt; DownloadHandlerFileWithDecryption

    class ResourceProviderBase {
        &lt;&lt;ResourceManager&gt;&gt;
    }
    
    class CryptoAssetBundleProviderBase {
    }
    
    class IAssetBundleResource {
        &lt;&lt;ResourceManager&gt;&gt;
    }

    class CryptoAssetBundleResource {
    }

    class DownloadHandlerScript {
        &lt;&lt;Networking&gt;&gt;
    }

    class DownloadHandlerFileWithDecryption {
    }

    class ICryptoStreamFactory {
        &lt;&lt;interface&gt;&gt;
        +CreateEncryptStream(baseStream, options) CryptoStream
        +CreateDecryptStream(baseStream, options) CryptoStream
    }
    
    class BuildScriptBase {
        &lt;&lt;Addressables&gt;&gt;
    }
    
    class BuildScriptEncryptMode {
        &lt;&lt;editor&gt;&gt;
    }"></mermaid>
<h2 id="installation">Installation</h2>
<h3 id="package">Package</h3>
<pre><code class="language-text">https://github.com/extreal-dev/Extreal.Integration.AssetWorkflow.Addressables.git
</code></pre>
<admonition type="info"><p>Asset encryption and decryption feature is not available in WebGL, so we separated out the assembly definition and excluded WebGL from the platform so that it would not be compiled when building for the WebGL platform. Therefore, if you want to use the asset encryption and decryption feature, please add <code>Extreal.Integration.AssetWorkflow.Addressables.Custom.ResourceProviders</code> to the Assembly Definition.</p></admonition>
<h3 id="dependencies">Dependencies</h3>
<p>The Addressables wrapper uses the following packages.</p>
<ul>
<li><a href="/Extreal.Guide/en/core/logging">Extreal.Core.Logging</a></li>
<li><a href="/Extreal.Guide/en/core/common">Extreal.Core.Common</a></li>
<li><a href="https://docs.unity3d.com/Packages/com.unity.addressables@1.21/manual/index.html">Addressables</a></li>
<li><a href="https://github.com/Cysharp/UniTask">UniTask</a></li>
<li><a href="https://github.com/neuecc/UniRx">UniRx</a></li>
</ul>
<p>Please refer to <a href="../category/release">Release</a> for the correspondence between module version and each package version.</p>
<h3 id="settings">Settings</h3>
<p>There are no special settings when used by default.
See <a href="#assets-addressables-crypto">encryption and decryption</a> for encryption and decryption of assets.</p>
<h2 id="usage">Usage</h2>
<h3 id="use-addressables-features">Use Addressables features</h3>
<p>The features of Addressables are provided by the AssetProvider class.
Features not provided by AssetProvider should be implemented directly using Addressables.</p>
<pre><code class="language-csharp">var assetProvider = new AssetProvider();
</code></pre>
<p>Here are some basic uses of AssetProvider.</p>
<p>Use the GetDownloadSizeAsync method to get the download size.</p>
<pre><code class="language-csharp">var size = await assetProvider.GetDownloadSizeAsync(&quot;AssetName&quot;);
</code></pre>
<admonition type="caution"><p>AssetProvider.GetDownloadSizeAsync method returns 0 if the asset is cached, while the AssetProvider,
2022.1+ and when used on the WebGL platform, it returns the file size even if the asset is cached.
This behavior is due to the specification of the Addressables.GetDownloadSizeAsync method. For more information <a href="https://forum.unity.com/threads/in-2022-2-xx-webgl-builds-getdownloadsizeasync-does-not-reflect-the-cache.1440877/">Unity Forum</a>.</p></admonition>
<p>Use the DownloadAsync method to download assets.</p>
<pre><code class="language-csharp">assetProvider.DownloadAsync(&quot;AssetName&quot;).Forget();
</code></pre>
<p>You can also specify post-download processing, such as loading assets after downloading and then transitioning to the next stage.</p>
<pre><code class="language-csharp">Func&lt;UniTask&gt; navigate = async () =&gt;
{
    MessageConfig = await LoadAsync&lt;MessageConfig&gt;();
    stageNavigator.ReplaceAsync(nextStage).Forget();
};
assetProvider.DownloadAsync(&quot;AssetName&quot;, nextFunc: navigate).Forget();
</code></pre>
<p>Use <a href="#assets-addressables-event">event notification</a> if you want to run processing based on the download status.</p>
<p>Use the LoadAssetAsync method to load an asset.</p>
<pre><code class="language-csharp">using var assetDisposable = await assetProvider.LoadAssetAsync&lt;GameObject&gt;(&quot;AssetName&quot;);
var prefab = assetDisposable.Result;
</code></pre>
<p>Methods that load assets or scenes return AssetDisposable.
AssetDisposable is a class that enables the release of loaded assets with IDisposable&#x27;s Dispose.
AssetDisposable handles an asset in the same way as other classes that implement IDisposable.
Loaded asset is obtained from the Result property of AssetDisposable.</p>
<p>If you use the type name as the asset name, such as ScriptableObject, you can load an asset without specifying the asset name.</p>
<pre><code class="language-csharp">// Asset name: &quot;ChatConfig&quot;
using var assetDisposable = await assetProvider.LoadAssetAsync&lt;ChatConfig&gt;();
var chatConfig = assetDisposable.Result;
</code></pre>
<p>Use the LoadSceneAsync method to load a scene.</p>
<pre><code class="language-csharp">using var assetDisposable = await assetProvider.LoadSceneAsync(&quot;VirtualSpace&quot;);
var sceneInstance = assetDisposable.Result;
</code></pre>
<h3 id="assets-addressables-retry">Reconnect when asset downloads fail to connect</h3>
<p>AssetProvider uses the retry processing provided by <a href="/Extreal.Guide/en/core/common">Common</a> to reconnect when communication is disconnected.
The following description assumes that you are familiar with the retry processing, so if you have not checked the retry processing, please check the <a href="/Extreal.Guide/en/core/common#core-common-retry">retry processing</a> first.</p>
<p>AssetProvider does not reconnect by default.
Specifying a retry strategy in the AssetProvider constructor will reconnect.</p>
<pre><code class="language-csharp">var assetProvider = new AssetProvider(new CountingRetryStrategy());
</code></pre>
<p>The reconnection processing handled by AssetProvider is as follows.</p>
<ul>
<li>When to run reconnection<!-- -->
<ul>
<li>If the asset download failed<!-- -->
<ul>
<li>This includes cases where asset loading fails, since downloading occurs even when an asset is loaded without having downloaded the asset.</li>
</ul>
</li>
</ul>
</li>
<li>Reconnection processing details<!-- -->
<ul>
<li>If the asset download failed<!-- -->
<ul>
<li>Repeat the connection according to the retry strategy.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Use <a href="#assets-addressables-event">event notifications</a> if you want to run processing based on the status of retry processing.</p>
<h3 id="assets-addressables-event">Add processing triggered by asset download state</h3>
<p>AssetProvider has the following event notifications.</p>
<ul>
<li>OnDownloading<!-- -->
<ul>
<li>Timing：Just before downloading</li>
<li>Type：IObservable</li>
<li>Parameters：Asset name</li>
</ul>
</li>
<li>OnDownloaded<!-- -->
<ul>
<li>Timing：Immediately after download (including during processing)</li>
<li>Type：IObservable</li>
<li>Parameters：Download status<!-- -->
<ul>
<li>Asset name, total bytes, downloaded bytes, percentages, etc.</li>
</ul>
</li>
</ul>
</li>
<li>OnConnectRetrying<!-- -->
<ul>
<li>Timing：Just before retrying the connection</li>
<li>Type：IObservable</li>
<li>Parameters：Retry count<!-- -->
<ul>
<li>The first time is <code>1</code> and the second time is <code>2</code>.</li>
<li><code>1</code> means the start of retry strategy running.</li>
</ul>
</li>
</ul>
</li>
<li>OnConnectRetried<!-- -->
<ul>
<li>Timing：Immediately after connection retry is finished<!-- -->
<ul>
<li>If the retry is canceled, it will not be notified.</li>
</ul>
</li>
<li>Type：IObservable</li>
<li>Parameters：Retry result<!-- -->
<ul>
<li>true: If the retry strategy is run and the retry is successful</li>
<li>false: If the retry strategy is run and the retry is not successful finally</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="assets-addressables-crypto">Encrypt and decrypt assets</h3>
<admonition type="caution"><p>This feature is not available in WebGL.</p></admonition>
<admonition type="caution"><p>Note that using this feature alone is weak protection for intellectual property.</p><p>By using this feature, if someone obtains only encrypted assets, they will not be able to decrypt them.
For example, even if the URL of the asset download destination is known, the asset cannot be decrypted, thus preventing misappropriation of the asset.</p><p>However, if the encryption algorithm and the key used for decryption (implementation of ICryptoStreamFactory) are embedded in the application, the information necessary for decryption can be accessed and decrypted through reverse engineering.
Therefore, for the purpose of intellectual property protection, it is necessary to prevent decryption from the application by reverse engineering in addition to this feature.</p></admonition>
<p>Customize Addressables build scripts and ResourceProvider to encrypt and decrypt assets.
The following classes are provided.</p>
<ul>
<li>Build script to encrypt assets<!-- -->
<ul>
<li>BuildScriptEncryptMode</li>
</ul>
</li>
<li>ResourceProvider to decrypt assets<!-- -->
<ul>
<li>CryptoAssetBundleProviderBase</li>
<li>CryptoAssetBundleResource</li>
<li>DownloadHandlerFileWithDecryption</li>
</ul>
</li>
<li>Factory that creates the CryptoStream used to encrypt and decrypt the asset<!-- -->
<ul>
<li>ICryptoStreamFactory</li>
</ul>
</li>
</ul>
<p>These classes are related as follows.</p>
<ul>
<li>Since the cryptographic algorithm to be used and the management of keys vary depending on the security level required by the application, an ICryptoStreamFactory is provided to implement for their processing.</li>
<li>To embed ICryptoStreamFactory, CryptoAssetBundleProviderBase is provided as a Base class.</li>
<li>CryptoAssetBundleProviderBase decrypts assets using ICryptoStreamFactory. (Actually CryptoAssetBundleResource and DownloadHandlerFileWithDecryption do it)</li>
<li>BuildScriptEncryptMode encrypts using ICryptoStreamFactory if the ResourceProvider specified in the Asset Group at build execution is a class that extends CryptoAssetBundleProviderBase, and Otherwise, encryption is not executed.</li>
</ul>
<p>The following is an instruction on how to apply this feature.</p>
<p>First, set up a build script to encrypt the assets as follows.</p>
<ul>
<li>Create a ScriptableObject from the <code>Extreal &gt; Integration.AssetWorkflow.Addressables.Editor &gt; Encrypt Build Script</code> in the Create Asset menu.</li>
<li>Add the ScriptableObject you created to the <code>Build and Play Mode Scripts</code> from the <code>AddressablesAssetSettings</code> inspector.</li>
</ul>
<p>This setting allows you to choose <code>Build &gt; New Build &gt; Encrypt Build Script</code> in the <code>Addressables Group</code> window.</p>
<p>Next, set up the ResourceProvider that decrypts the asset.
ICryptoStreamFactory must be implemented first.
Implement ICryptoStreamFactory according to the requirements of your application.
An example implementation using AES is shown below to give an idea of the implementation.</p>
<pre><code class="language-csharp">public class CryptoStreamFactory : ICryptoStreamFactory
{
    public CryptoStream CreateEncryptStream(Stream baseStream, AssetBundleRequestOptions options)
        =&gt; CreateCryptoStream(baseStream, options, CryptoStreamMode.Write);

    public CryptoStream CreateDecryptStream(Stream baseStream, AssetBundleRequestOptions options)
        =&gt; CreateCryptoStream(baseStream, options, CryptoStreamMode.Read);

    private static CryptoStream CreateCryptoStream
    (
        Stream baseStream,
        AssetBundleRequestOptions options,
        CryptoStreamMode mode
    )
    {
        using var aes = CreateAesManaged(options);
        var cryptor = mode == CryptoStreamMode.Write ? aes.CreateEncryptor() : aes.CreateDecryptor();
        return new CryptoStream(baseStream, cryptor, mode);
    }

    [SuppressMessage(&quot;Usage&quot;, &quot;CC0022&quot;)]
    private static AesManaged CreateAesManaged(AssetBundleRequestOptions options)
    {
        const int keyLength = 128;
        var salt = Encoding.UTF8.GetBytes(options.BundleName);

        using var keyGen = new Rfc2898DeriveBytes(SecretVariables.CryptAssetPassword, salt, 100, HashAlgorithmName.SHA256);
        using var ivGen = new Rfc2898DeriveBytes(SecretVariables.CryptAssetIv, salt, 1, HashAlgorithmName.SHA256);

        var key = keyGen.GetBytes(keyLength / 8);
        var iv = ivGen.GetBytes(keyLength / 8);

        return new AesManaged
        {
            BlockSize = keyLength,
            KeySize = keyLength,
            Mode = CipherMode.CBC,
            Padding = PaddingMode.PKCS7,
            Key = key,
            IV = iv
        };
    }
}
</code></pre>
<p>Implement a class that extends CryptoAssetBundleProviderBase.
Return a class that implements ICryptoStreamFactory.</p>
<pre><code class="language-csharp">[DisplayName(&quot;Crypto AssetBundle Provider&quot;)]
public class CryptoAssetBundleProvider : CryptoAssetBundleProviderBase
{
    public override ICryptoStreamFactory CryptoStreamFactory =&gt; new CryptoStreamFactory();
}
</code></pre>
<p>Now you can select the implemented class as the <code>Content Packing &amp; Loading &gt; Advanced Options &gt; Asset Bundle Provider</code> from the inspector of the <code>Addressables Asset Group</code>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Extreal.Guide/en/integration/multiplay.ngo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Multiplay using Netcode for GameObjects</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Extreal.Guide/en/integration/web.common"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common for Web</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-for" class="table-of-contents__link toc-highlight">What for?</a></li><li><a href="#specification" class="table-of-contents__link toc-highlight">Specification</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a><ul><li><a href="#addressables-wrapper" class="table-of-contents__link toc-highlight">Addressables wrapper</a></li><li><a href="#addressables-customization" class="table-of-contents__link toc-highlight">Addressables customization</a></li></ul></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#package" class="table-of-contents__link toc-highlight">Package</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#settings" class="table-of-contents__link toc-highlight">Settings</a></li></ul></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#use-addressables-features" class="table-of-contents__link toc-highlight">Use Addressables features</a></li><li><a href="#assets-addressables-retry" class="table-of-contents__link toc-highlight">Reconnect when asset downloads fail to connect</a></li><li><a href="#assets-addressables-event" class="table-of-contents__link toc-highlight">Add processing triggered by asset download state</a></li><li><a href="#assets-addressables-crypto" class="table-of-contents__link toc-highlight">Encrypt and decrypt assets</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">License</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Apache License 2.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Feedback</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/extreal-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Used by</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.buralit.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">BURALIT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item">
                    <a class="footer__link-item" href="javascript:void(0);" onclick="goTermsOfUse()">Terms of Use</a>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 TIS, Inc. Built with Docusaurus.<br><small>The names of products or services appearing on this site are trademarks or registered trademarks of the respective companies.</small></div></div></div></footer></div>
</body>
</html>