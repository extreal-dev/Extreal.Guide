<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-integration/chat.vivox" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Chat using Vivox | Extreal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://extreal-dev.github.io/Extreal.Guide/en/next/integration/chat.vivox"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chat using Vivox | Extreal"><meta data-rh="true" name="description" content="What for?"><meta data-rh="true" property="og:description" content="What for?"><link data-rh="true" rel="icon" href="/Extreal.Guide/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://extreal-dev.github.io/Extreal.Guide/en/next/integration/chat.vivox"><link data-rh="true" rel="alternate" href="https://extreal-dev.github.io/Extreal.Guide/next/integration/chat.vivox" hreflang="ja"><link data-rh="true" rel="alternate" href="https://extreal-dev.github.io/Extreal.Guide/en/next/integration/chat.vivox" hreflang="en"><link data-rh="true" rel="alternate" href="https://extreal-dev.github.io/Extreal.Guide/next/integration/chat.vivox" hreflang="x-default"><script src="https://plausible.io/js/script.js" defer="defer" data-domain="extreal-dev.github.io,all.fintan"></script>
<script src="/Extreal.Guide/js/custom.js"></script>
<script src="/Extreal.Guide/en/js/custom.js"></script><link rel="stylesheet" href="/Extreal.Guide/en/assets/css/styles.bb6e314e.css">
<script src="/Extreal.Guide/en/assets/js/runtime~main.0567f7e3.js" defer="defer"></script>
<script src="/Extreal.Guide/en/assets/js/main.204b57dc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://fintan.jp" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/Extreal.Guide/en/img/fintan-logo.jpg" alt="Fintan" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Extreal.Guide/en/img/fintan-logo.jpg" alt="Fintan" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/Extreal.Guide/en/">Extreal</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Extreal.Guide/en/next/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/Extreal.Guide/en/next/intro">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Extreal.Guide/en/next/integration/chat.vivox">Next</a></li><li><a class="dropdown__link" href="/Extreal.Guide/en/integration/chat.vivox">1.2.0</a></li><li><a class="dropdown__link" href="/Extreal.Guide/en/1.1.0/integration/chat.vivox">1.1.0</a></li><li><a class="dropdown__link" href="/Extreal.Guide/en/1.0.0/integration/chat.vivox">1.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/Extreal.Guide/next/integration/chat.vivox" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/Extreal.Guide/en/next/integration/chat.vivox" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://fintan.jp/blog-category/xr/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Fintan - XR<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/extreal-dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Extreal.Guide/en/next/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/next/category/release">Release</a><button aria-label="Expand sidebar category &#x27;Release&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/next/category/core">Core</a><button aria-label="Expand sidebar category &#x27;Core&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/Extreal.Guide/en/next/category/integration">Integration</a><button aria-label="Collapse sidebar category &#x27;Integration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Extreal.Guide/en/next/integration/chat.vivox">Chat using Vivox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/next/integration/multiplay.ngo">Multiplay using Netcode for GameObjects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/next/integration/asset-workflow.addressables">Asset Workflow using Addressables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/next/integration/web.common">Common for Web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/next/integration/p2p.webrtc">P2P using WebRTC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Extreal.Guide/en/next/integration/chat.webrtc">Chat using WebRTC</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/next/category/sample-application">Sample Application</a><button aria-label="Expand sidebar category &#x27;Sample Application&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/next/category/learning">Learning</a><button aria-label="Expand sidebar category &#x27;Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Extreal.Guide/en/next/category/legal">Legal</a><button aria-label="Expand sidebar category &#x27;Legal&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Extreal<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Extreal.Guide/en/integration/chat.vivox">latest version</a></b> (<!-- -->1.2.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Extreal.Guide/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Extreal.Guide/en/next/category/integration"><span itemprop="name">Integration</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Chat using Vivox</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="chat-using-vivox">Chat using Vivox</h1>
<h2 id="what-for">What for?</h2>
<p>We provide a wrapper that makes <a href="https://unity.com/ja/products/vivox">Vivox</a> easier to use in applications.</p>
<p>We will call this feature, which wraps Vivox, the Vivox wrapper.</p>
<p>The implementation of login/logout or connecting/disconnecting to a channel using Vivox&#x27;s API is similar in any application.
The Vivox wrapper provides features that are common to such implementations when using Vivox.</p>
<p>The goal is to make Vivox introduction smooth by using the Vivox wrapper in your applications.</p>
<admonition type="caution"><p>The Vivox wrapper makes Vivox easier to use, but it does not mean that you only need to know the Vivox wrapper to realize voice/text chat without knowing Vivox.
The Vivox wrapper compensates for the difficulties and lack of features when using Vivox as it is, but transfers the voice/text chat process to Vivox.
Therefore, to use the Vivox wrapper, it is assumed that you know Vivox.
If you do not know Vivox, please refer to <a href="/Extreal.Guide/en/next/learning/intro#chat">Learning</a> to learn about Vivox.
This guide assumes you know Vivox.</p></admonition>
<h2 id="specification">Specification</h2>
<p>The specifications of the Vivox wrapper are as follows.</p>
<ul>
<li>You can use Vivox features.</li>
<li>Reconnect when communication is disconnected.</li>
<li>You can add processing triggered by Vivox client state.</li>
</ul>
<h2 id="architecture">Architecture</h2>
<mermaid chart="classDiagram

    VivoxClient --&gt; VivoxAppConfig
    VivoxClient ..&gt; VivoxAuthConfig
    VivoxClient ..&gt; VivoxChannelConfig
    VivoxClient ..&gt; VivoxConnectionException
    VivoxChannelConfig --&gt; ChatType
    DisposableBase &lt;|-- VivoxClient

    class VivoxClient {
        +Client Client
        +LoginSession ILoginSession
        +OnLoggedIn IObservable
        +OnLoggedOut IObservable
        +OnRecoveryStateChanged IObservable
        +OnChannelSessionAdded IObservable
        +OnChannelSessionRemoved IObservable
        +OnUserConnected IObservable
        +OnUserDisconnected IObservable
        +OnTextMessageReceived IObservable
        +OnAudioEnergyChanged IObservable
        +OnConnectRetrying IObservable
        +OnConnectRetried IObservable
        +VivoxClient(appConfig)
        +LoginAsync(authConfig, retryCancellationToken) void
        +Logout() void
        +ConnectAsync(channelConfig, connectCancellationToken) ChannelId
        +Disconnect(channelId) void
        +DisconnectAllChannels() void
        +SendTextMessage(message, channelIds, language, applicationStanzaNamespace, applicationStanzaBody) void
        +SendTextMessage(message, channelId, language, applicationStanzaNamespace, applicationStanzaBody) void
        +SetTransmissionMode(transmissionMode, channelId) void
        +GetAudioInputDevicesAsync() IAudioDevices
        +SetAudioInputDeviceAsync(device) void
        +GetAudioOutputDevicesAsync() IAudioDevices
        +SetAudioOutputDeviceAsync(device) void
    }

    class VivoxAppConfig {
        +ApiEndPoint string
        +Domain string
        +Issuer string
        +SecretKey string
        +VivoxConfig VivoxConfig
        +LoginRetryStrategy IRetryStrategy
        +VivoxAppConfig(apiEndPoint, domain, issuer, secretKey, vivoxConfig, loginRetryStrategy)
    }

    class VivoxAuthConfig {
        +DisplayName string
        +AccountName string
        +TokenExpirationDuration TimeSpan
        +VivoxAuthConfig(displayName, accountName, tokenExpirationDuration)
    }

    class ChatType {
        &lt;&lt;enumeration&gt;&gt;
        TextAndAudio
        TextOnly
        AudioOnly
    }

    class VivoxChannelConfig {
        +ChannelName string
        +ChatType ChatType
        +ChannelType ChannelType
        +Properties Channel3DProperties
        +TransmissionSwitch bool
        +TokenExpirationDuration TimeSpan
        +VivoxChannelConfig(channelName, chatType, channelType, transmissionSwitch, tokenExpirationDuration)
    }

    class VivoxConnectionException {
        +VivoxConnectionException(message)
        +VivoxConnectionException(message, innerException)
    }

    class DisposableBase {
        &lt;&lt;extreal&gt;&gt;
    }"></mermaid>
<h2 id="installation">Installation</h2>
<h3 id="package">Package</h3>
<pre><code class="language-text">https://github.com/extreal-dev/Extreal.Integration.Chat.Vivox.git
</code></pre>
<h3 id="dependencies">Dependencies</h3>
<p>The Vivox wrapper uses the following packages.</p>
<ul>
<li><a href="/Extreal.Guide/en/next/core/logging">Extreal.Core.Logging</a></li>
<li><a href="/Extreal.Guide/en/next/core/common">Extreal.Core.Common</a></li>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm">Vivox Unity SDK</a></li>
<li><a href="https://github.com/Cysharp/UniTask">UniTask</a></li>
<li><a href="https://github.com/neuecc/UniRx">UniRx</a></li>
</ul>
<p>Please refer to <a href="../category/release">Release</a> for the correspondence between module version and each package version.</p>
<h3 id="settings">Settings</h3>
<p>VivoxClient is initialized.</p>
<p>It is assumed that you have created a project with Vivox set up in <a href="https://cloud.unity.com">Unity Cloud</a> to which the client will connect.</p>
<p>To initialize VivoxClient, VivoxAppConfig, which holds the connection information to Vivox, is required.
As an example, we will show how to set the connection information to Vivox with a ScriptableObject.
Create a ScriptableObject that generates VivoxAppConfig and set the connection information to Vivox in the inspector.</p>
<pre><code class="language-csharp">[CreateAssetMenu(
    menuName = &quot;Config/&quot; + nameof(ChatConfig),
    fileName = nameof(ChatConfig))]
public class ChatConfig : ScriptableObject
{
    [SerializeField] private string apiEndPoint;
    [SerializeField] private string domain;
    [SerializeField] private string issuer;
    [SerializeField] private string secretKey;

    public VivoxAppConfig ToVivoxAppConfig()
        =&gt; new VivoxAppConfig(apiEndPoint, domain, issuer, secretKey);
}
</code></pre>
<admonition type="info"><p>Additionally to the connection information, VivoxAppConfig contains the following settings.</p><ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/class_vivox_unity_1_1_vivox_config.html?TocPath=Vivox%2520Unity%2520SDK%2520documentation%257CUnity%2520API%2520Reference%2520Manual%257CClass%2520List%257C_____15">VivoxConfig</a></li>
<li>Retry strategy used in reconnecting after communication disconnection<!-- -->
<ul>
<li>See <a href="#chat-vivox-retry">Reconnect when communication is disconnected</a> for details.</li>
</ul>
</li>
</ul></admonition>
<p>Initialize VivoxClient with VContainer.</p>
<pre><code class="language-csharp">public class ChatControlScope : LifetimeScope
{
    [SerializeField] private ChatConfig chatConfig;

    protected override void Configure(IContainerBuilder builder)
    {
        builder.RegisterComponent(chatConfig.ToVivoxAppConfig());
        builder.Register&lt;VivoxClient&gt;(Lifetime.Singleton);
    }
}
</code></pre>
<h2 id="usage">Usage</h2>
<h3 id="use-vivox-features">Use Vivox features</h3>
<p>Vivox features are provided by VivoxClient.
For features that are not provided by VivoxClient, please obtain the Client or ILoginSession provided by Vivox from VivoxClient and implement them.</p>
<pre><code class="language-csharp">var client = vivoxClient.Client;
var loginSession = vivoxClient.LoginSession;
</code></pre>
<p>Here are some basic instructions for using VivoxClient.</p>
<p>To conduct voice/text chat, you must first log in to the Vivox application.
Login is done using LoginAsync in VivoxClient.</p>
<pre><code class="language-csharp">var vivoxAuthConfig = new VivoxAuthConfig(&quot;Guest&quot;);
vivoxClient.LoginAsync(vivoxAuthConfig).Forget();
</code></pre>
<p>Logout is done using Logout in VivoxClient.</p>
<pre><code class="language-csharp">vivoxClient.Logout();
</code></pre>
<p>You can use VivoxClient&#x27;s ConnectAsync to enter the channel.</p>
<pre><code class="language-csharp">var vivoxChannelConfig = new VivoxChannelConfig(&quot;GuestChannel&quot;);
vivoxClient.ConnectAsync(vivoxChannelConfig).Forget();
</code></pre>
<p>VivoxChannelConfig enables voice and text chat by default.
If you want to restrict to voice chat only or text chat only, specify ChatType.
An example of restricting to voice chat only is as follows.</p>
<pre><code class="language-csharp">var vivoxChannelConfig = new VivoxChannelConfig(&quot;GuestChannel&quot;, ChatType.AudioOnly);
</code></pre>
<p>If you want to exit from all channels at the point of exiting the space, such as when allowing voice or text chat only within a space, use DisconnectAllChannels in VivoxClient.</p>
<pre><code class="language-csharp">vivoxClient.DisconnectAllChannels();
</code></pre>
<p>You can use Disconnect in VivoxClient to leave a specific channel, such as when a group chat feature is provided.</p>
<pre><code class="language-csharp">vivoxClient.Disconnect(channelId);
</code></pre>
<p>You can use SendTextMessage in VivoxClient to send text chat messages.</p>
<pre><code class="language-csharp">vivoxClient.SendTextMessage(message, channelId);
</code></pre>
<p>Text chat messages are received via OnTextMessageReceived, an event notification published by VivoxClient.</p>
<pre><code class="language-csharp">vivoxClient.OnTextMessageReceived
    .Subscribe(message =&gt; /* do something with message */)
    .AddTo(disposables);
</code></pre>
<h3 id="chat-vivox-retry">Reconnect when communication is disconnected</h3>
<p>VivoxClient uses the retry processing provided by <a href="/Extreal.Guide/en/next/core/common">Common</a> to reconnect when communication is disconnected.
The following description assumes that you are familiar with the retry processing, so if you have not checked the retry processing, please check the <a href="/Extreal.Guide/en/next/core/common#core-common-retry">retry processing</a> first.</p>
<p>VivoxClient does not reconnect by default.
If a retry strategy is specified in VivoxAppConfig, it will reconnect.</p>
<pre><code class="language-csharp">new VivoxAppConfig(apiEndPoint, domain, issuer, secretKey, loginRetryStrategy: new CountingRetryStrategy());
</code></pre>
<p>The reconnection processing handled by VivoxClient is as follows.</p>
<ul>
<li>When to run reconnection<!-- -->
<ul>
<li>If login failed</li>
<li>If Vivox Unity SDK <a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#Unity/developer-guide/channels/automatic-connection-recovery/connection-recovery.htm?TocPath=Vivox%2520Unity%2520SDK%2520documentation%257CVivox%2520Unity%2520Developer%2520Guide%257CChannels%257CAutomatic%2520connection%2520recovery%257C_____0">automatic connection recovery</a> failed<!-- -->
<ul>
<li>If communication is lost after login, Vivox Unity SDK will try to recover the connection automatically for 30 seconds.</li>
<li>If the automatic connection recovery failed, the client will be logged out by Vivox Unity SDK.</li>
</ul>
</li>
</ul>
</li>
<li>Reconnection processing details<!-- -->
<ul>
<li>If login failed<!-- -->
<ul>
<li>Repeat login according to retry strategy.</li>
</ul>
</li>
<li>If Vivox Unity SDK automatic connection recovery failed<!-- -->
<ul>
<li>Repeat login according to retry strategy.</li>
<li>If the login succeeds, it connects to all channels to which it was connected before disconnection.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>VivoxClient reconnection only covers the login processing, because if automatic connection recovery fails, the client is logged out and must start over from login.</p>
<p>Use <a href="#chat-vivox-event">event notifications</a> if you want to run processing based on the status of retry processing.</p>
<h3 id="chat-vivox-event">Add a processing triggered by Vivox client state</h3>
<p>VivoxClient has the following event notifications.</p>
<ul>
<li>OnLoggedIn<!-- -->
<ul>
<li>Timing: Immediately after login</li>
<li>Type: IObservable</li>
<li>Parameters: None</li>
</ul>
</li>
<li>OnLoggedOut<!-- -->
<ul>
<li>Timing: Immediately after logout</li>
<li>Type: IObservable</li>
<li>Parameters: None</li>
</ul>
</li>
<li>OnRecoveryStateChanged<!-- -->
<ul>
<li>Timing: Immediately after the recovery state changes on unexpected network disconnection</li>
<li>Type: IObservable</li>
<li>Parameters: Recovery state<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/namespace_vivox_unity.html#a21771ea5086c36c42452bc29059ec379%3FTocPath%3DCore%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7CUnity%20API%20Reference%20Manual%7CUnity%20API%20Reference%20Manual%7C_____4">ConnectionRecoveryState</a></li>
</ul>
</li>
</ul>
</li>
<li>OnChannelSessionAdded<!-- -->
<ul>
<li>Timing: Immediately after a channel is added</li>
<li>Type: IObservable</li>
<li>Parameters: ID of the added channel<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/class_vivox_unity_1_1_channel_id.html%3FTocPath%3DVivox%2520Unity%2520SDK%2520documentation%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7C_____5">ChannelId</a></li>
</ul>
</li>
</ul>
</li>
<li>OnChannelSessionRemoved<!-- -->
<ul>
<li>Timing: Immediately after a channel is removed</li>
<li>Type: IObservable</li>
<li>Parameters: ID of the removed channel<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/class_vivox_unity_1_1_channel_id.html%3FTocPath%3DVivox%2520Unity%2520SDK%2520documentation%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7C_____5">ChannelId</a></li>
</ul>
</li>
</ul>
</li>
<li>OnUserConnected<!-- -->
<ul>
<li>Timing: Immediately after a participant connects to the channel.<!-- -->
<ul>
<li>The user who originated the event is also notified of this event.</li>
</ul>
</li>
<li>Type: IObservable</li>
<li>Parameters: Participant who connected to the channel.<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/interface_vivox_unity_1_1_i_participant.html%3FTocPath%3DVivox%2520Unity%2520SDK%2520documentation%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7C_____31">IParticipant</a></li>
<li>The IsSelf property of IParticipant determines if the participant is the user itself who entered the channel.</li>
</ul>
</li>
</ul>
</li>
<li>OnUserDisconnected<!-- -->
<ul>
<li>Timing: Immediately after a participant disconnects from the channel.<!-- -->
<ul>
<li>The user who originated the event is also notified of this event.</li>
</ul>
</li>
<li>Type: IObservable</li>
<li>Parameters: Participant who disconnected from the room<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/interface_vivox_unity_1_1_i_participant.html%3FTocPath%3DVivox%2520Unity%2520SDK%2520documentation%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7C_____31">IParticipant</a></li>
<li>The IsSelf property of IParticipant determines if the participant is the user itself who left the channel.</li>
</ul>
</li>
</ul>
</li>
<li>OnTextMessageReceived<!-- -->
<ul>
<li>Timing: Immediately after a message is received on the channel</li>
<li>Type: IObservable</li>
<li>Parameters: Incoming message<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/interface_vivox_unity_1_1_i_channel_text_message.html%3FTocPath%3DCore%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7CUnity%20API%20Reference%20Manual%7CClass%20List%7C_____33">IChannelTextMessage</a></li>
</ul>
</li>
</ul>
</li>
<li>OnAudioEnergyChanged<!-- -->
<ul>
<li>Timing: Immediately after a change in the participant&#x27;s audio loudness</li>
<li>Type: IObservable</li>
<li>Parameters: Participant and audio volume (tuple)<!-- -->
<ul>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/interface_vivox_unity_1_1_i_participant.html%3FTocPath%3DVivox%2520Unity%2520SDK%2520documentation%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7C_____31">IParticipant</a></li>
<li><a href="https://docs.vivox.com/v5/general/unity/15_1_210000/en-us/Default.htm#ReferenceManual/Unity/interface_vivox_unity_1_1_i_participant_properties.html#ac14ea71429adc8e41eaa22af478296ee%3FTocPath%3DCore%7CUnity%2520API%2520Reference%2520Manual%7CClass%2520List%7CUnity%20API%20Reference%20Manual%7CClass%20List%7C_____40">AudioEnergy</a></li>
</ul>
</li>
</ul>
</li>
<li>OnConnectRetrying<!-- -->
<ul>
<li>Timing：Just before retrying the connection</li>
<li>Type：IObservable</li>
<li>Parameters：Retry count<!-- -->
<ul>
<li>The first time is <code>1</code> and the second time is <code>2</code>.</li>
<li><code>1</code> means the start of retry strategy running.</li>
</ul>
</li>
</ul>
</li>
<li>OnConnectRetried<!-- -->
<ul>
<li>Timing：Immediately after connection retry is finished<!-- -->
<ul>
<li>If the retry is canceled, it will not be notified.</li>
</ul>
</li>
<li>Type：IObservable</li>
<li>Parameters：Retry result<!-- -->
<ul>
<li>true: If the retry strategy is run and the retry is successful</li>
<li>false: If the retry strategy is run and the retry is not successful finally</li>
</ul>
</li>
</ul>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Extreal.Guide/en/next/category/integration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Integration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Extreal.Guide/en/next/integration/multiplay.ngo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Multiplay using Netcode for GameObjects</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-for" class="table-of-contents__link toc-highlight">What for?</a></li><li><a href="#specification" class="table-of-contents__link toc-highlight">Specification</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#package" class="table-of-contents__link toc-highlight">Package</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#settings" class="table-of-contents__link toc-highlight">Settings</a></li></ul></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#use-vivox-features" class="table-of-contents__link toc-highlight">Use Vivox features</a></li><li><a href="#chat-vivox-retry" class="table-of-contents__link toc-highlight">Reconnect when communication is disconnected</a></li><li><a href="#chat-vivox-event" class="table-of-contents__link toc-highlight">Add a processing triggered by Vivox client state</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">License</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Apache License 2.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Feedback</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/extreal-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Used by</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.buralit.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">BURALIT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item">
                    <a class="footer__link-item" href="javascript:void(0);" onclick="goTermsOfUse()">Terms of Use</a>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 TIS, Inc. Built with Docusaurus.<br><small>The names of products or services appearing on this site are trademarks or registered trademarks of the respective companies.</small></div></div></div></footer></div>
</body>
</html>